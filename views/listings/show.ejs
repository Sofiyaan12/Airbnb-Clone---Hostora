<% layout("/layouts/boilerplate.ejs") %>

<div class="row">
  <div class="col-10 offset-1">
    <h2><%= listing.title %></h2>
    <p><%= listing.description %></p>
    <p><strong>Location:</strong> <%= listing.location %>, <%= listing.country %></p>
    <p><strong>Price:</strong> â‚¹<%= listing.price %></p>
    
    <% if (listing.image && listing.image.url) { %>
      <img src="<%= listing.image.url %>" alt="Listing Image" class="img-fluid rounded mb-3" />
    <% } %>

    <div id="map"></div>
  </div>
</div>

<script>
  mapboxgl.accessToken = '<%= process.env.MAPBOX_TOKEN %>'; // Make sure it's defined in your .env file
  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [78.4867, 17.3850], // Example: Hyderabad
    zoom: 10
  });

  // Optional: Marker
  new mapboxgl.Marker()
    .setLngLat([78.4867, 17.3850])
    .addTo(map);
</script>
